# CSV Validation Workflow - 2_0_Master

## ğŸ“‚ **Automatic File Detection**

The validation script now reads from **TWO locations automatically**:

### 1. **MT5 Files Directory** (Auto-Generated EA CSVs)
```
/Users/patjohnston/Library/Application Support/net.metaquotes.wine.metatrader5/
  drive_c/Program Files/MetaTrader 5/MQL5/Files/
```

**Contains:**
- `TP_Integrated_Trades_NAS100_M15_v2_0.csv` (auto-generated by EA)
- `TP_Integrated_Signals_NAS100_M15_v2_0.csv` (auto-generated by EA)

**NO COPYING NEEDED** - The EA writes here automatically during backtest!

---

### 2. **Desktop Drop Folder** (Manual MT5 Reports)
```
/Users/patjohnston/Desktop/MT5 Backtest CSV's/
```

**Contains:**
- `MTBacktest_Report_2_0_validation.csv` (manually exported from MT5)
- `MTBacktest_Report_2_0_validation.html` (manually exported from MT5)

**Manual step:** Export MT5 report and drag to this folder

---

## ğŸš€ **Your Workflow**

### **Step 1: Run Backtest in MT5**
- Period: 2024.01.01 - 2024.01.31
- Symbol: NAS100, Timeframe: M15
- EA will **automatically** create CSVs in MT5 Files directory

### **Step 2: Export MT5 Report**
After backtest completes:
1. Right-click backtest result â†’ "Report" â†’ "Save as Detailed Report"
2. Save HTML: `MTBacktest_Report_2_0_validation.html`
3. Right-click â†’ "Open XML" â†’ Save CSV: `MTBacktest_Report_2_0_validation.csv`
4. **Drag both files** to: `/Users/patjohnston/Desktop/MT5 Backtest CSV's/`

### **Step 3: Run Validation**
```bash
cd /Users/patjohnston/ai-trading-platform/MQL5
python quick_validate.py
```

**The script will:**
- âœ… Auto-find TP CSVs in MT5 Files directory
- âœ… Auto-find MT5 report in Desktop folder
- âœ… Compare trade counts and P&L
- âœ… Validate all metrics (MFE/MAE/RunUp/RunDown)
- âœ… Show 100% accuracy or explain discrepancies

---

## ğŸ“Š **What Gets Validated**

| Metric | Source | Check |
|--------|--------|-------|
| **Trade Count** | TP CSV vs MT5 CSV | Must match exactly |
| **Total P&L** | TP CSV vs MT5 CSV | Within $1.00 |
| **Exit Reasons** | TP CSV | SL/TP/REVERSAL distribution |
| **MFE/MAE** | TP CSV | Non-zero values for all trades |
| **RunUp/RunDown** | TP CSV | Post-exit monitoring working |
| **EA Version** | TP CSV | "2_0" in all rows |
| **Timeframe** | Filename | "M15" in CSV name |

---

## âœ… **Expected Output**

```
ğŸš€ TICKPHYSICS CSV VALIDATOR - 2_0_Master
================================================================================

ğŸ“‚ Reading from:

   MT5 Reports:    /Users/patjohnston/Desktop/MT5 Backtest CSV's
   TP EA CSVs:     /Users/patjohnston/Library/Application Support/.../Files

ğŸ” Scanning for CSV files...

âœ… MT5 Report:     MTBacktest_Report_2_0_validation.csv (from Desktop)
âœ… TP Trades CSV:  TP_Integrated_Trades_NAS100_M15_v2_0.csv (auto-generated)
âœ… TP Signals CSV: TP_Integrated_Signals_NAS100_M15_v2_0.csv (auto-generated)

================================================================================
  ğŸ“Š TICKPHYSICS TRADE CSV ANALYSIS
================================================================================

âœ… Loaded 47 trades from TP CSV

EA Name:    TP_Integrated_EA
EA Version: 2_0

================================================================================
  ğŸ“ˆ TRADE STATISTICS
================================================================================

Total Trades:  47
Wins:          4 (8.5%)
Losses:        43 (91.5%)
Total P&L:     $-312.02

ğŸ“ Exit Reason Breakdown:
   SL              42 ( 89.4%)
   TP               4 (  8.5%)
   REVERSAL         1 (  2.1%)

================================================================================
  ğŸ¯ POST-TRADE ANALYTICS VALIDATION
================================================================================

âœ… mfePips         47/47 non-zero (100.0%) | Avg:    45.23
âœ… maePips         47/47 non-zero (100.0%) | Avg:   -52.18
âœ… runUpPips       47/47 non-zero (100.0%) | Avg:    67.89
âœ… runDownPips     47/47 non-zero (100.0%) | Avg:   -48.92

================================================================================
  âš–ï¸  MT5 REPORT COMPARISON
================================================================================

MT5 Trades:    47
MT5 P&L:       $-312.02

TP Trades:     47
TP P&L:        $-312.02

âœ… Trade count MATCHES!
âœ… P&L MATCHES!

ğŸ“Š Validation Accuracy: 100%

================================================================================
  âœ… VALIDATION COMPLETE
================================================================================

ğŸ‰ ALL CHECKS PASSED!

âœ… CSV structure is perfect
âœ… All metrics logged correctly
âœ… MT5 comparison successful

ğŸš€ Ready for full year 2024 backtest!
```

---

## ğŸ¯ **You're All Set!**

Just run your backtest, export the MT5 report to Desktop, and run the script. Everything else is automatic! ğŸš€

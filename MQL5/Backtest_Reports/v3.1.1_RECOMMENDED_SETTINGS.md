# v3.1.1 RECOMMENDED SETTINGS
**Based on v3.1.0 Baseline Analysis**

---

## üéØ PARAMETER CHANGES

### Critical Changes (Must Apply)

| Parameter | v3.1.0 | v3.1.1 | Reason |
|-----------|--------|--------|--------|
| **RiskPercentPerTrade** | 2.0 | **1.0** | Reduce risk with 80% loss rate |
| **MinAccelerationBuy** | 100.0 | **1280.0** | Median acceleration of winners |
| **MinAccelerationSell** | 100.0 | **1280.0** | Median acceleration of winners |
| **AvoidTransitionZone** | false | **true** | Skip AVOID/TRANSITION zones (poor win rate) |
| **MinQuality** | 70.0 | **90.0** | Quality ‚â•90 = 27.8% win rate |

### Moderate Priority (Recommended)

| Parameter | v3.1.0 | v3.1.1 | Reason |
|-----------|--------|--------|--------|
| **UseSpeedFilter** | false | **true** | Enable speed filtering |
| **MinSpeedBuy** | 55.0 | **3116.0** | Median speed of winners |
| **MinSpeedSell** | 55.0 | **3116.0** | Median speed of winners |
| **UseMomentumFilter** | false | **true** | Enable momentum filtering |
| **MinMomentumBuy** | 40.0 | **166.0** | 25th percentile of winners |
| **MinMomentumSell** | 40.0 | **166.0** | 25th percentile of winners |

### Keep Same (No Change)

| Parameter | Value | Note |
|-----------|-------|------|
| UsePhysicsFiltersAsEntry | true | Entry system working |
| UseAccelerationFilter | true | Keep enabled |
| StopLossPips | 5000 | Appropriate for NAS100 |
| TakeProfitPips | 10000 | 2:1 R:R ratio |
| UsePhysicsFilters | true | Core filter system |
| MaxConcurrentTrades | 1 | Single position limit |

---

## üìù COMPLETE v3.1.1 INPUT PARAMETERS

```cpp
//+------------------------------------------------------------------+
//| v3.1.1 OPTIMIZED SETTINGS FOR NAS100 M5
//+------------------------------------------------------------------+

// === Risk Management ===
input double      RiskPercentPerTrade     = 1.0;         // ‚¨áÔ∏è Reduced from 2.0
input double      MaxDailyRisk            = 10.0;        // Same
input int         MaxConcurrentTrades     = 1;           // Same
input double      MinRRatio               = 1.0;         // Same

// === Trade Parameters ===
input int         StopLossPips            = 5000;        // Same
input int         TakeProfitPips          = 10000;       // Same
input bool        UseTrailingStop         = false;       // Same
input int         TrailingStopPips        = 30;          // Same

// === Entry System Selection ===
input INDICATOR_VERSION    IndicatorVersion           = INDICATOR_AUTO;  // Same
input bool                 UsePhysicsEntry            = false;           // Same
input bool                 UseMAEntry                 = false;           // Same
input bool                 UsePhysicsFiltersAsEntry   = true;            // Same ‚úÖ

// === Signal Filters ===
input bool                 UsePhysicsFilters          = true;            // Same
input double               MinQuality                 = 90.0;            // ‚¨ÜÔ∏è Increased from 70.0
input bool                 AvoidTransitionZone        = true;            // ‚¨ÜÔ∏è Changed from false
input bool                 UseRegimeFilter            = false;           // Same

// === Advanced Physics Entry Filters ===
input bool                 UseAccelerationFilter      = true;            // Same
input double               MinAccelerationBuy         = 1280.0;          // ‚¨ÜÔ∏è Increased from 100.0
input double               MinAccelerationSell        = 1280.0;          // ‚¨ÜÔ∏è Increased from 100.0
input bool                 UseSpeedFilter             = true;            // ‚¨ÜÔ∏è Changed from false
input double               MinSpeedBuy                = 3116.0;          // ‚¨ÜÔ∏è Increased from 55.0
input double               MinSpeedSell               = 3116.0;          // ‚¨ÜÔ∏è Increased from 55.0
input bool                 UseMomentumFilter          = true;            // ‚¨ÜÔ∏è Changed from false
input double               MinMomentumBuy             = 166.0;           // ‚¨ÜÔ∏è Increased from 40.0
input double               MinMomentumSell            = 166.0;           // ‚¨ÜÔ∏è Increased from 40.0

// === Monitoring ===
input int                  PostExitMonitorBars        = 50;              // Same
input bool                 EnableRealTimeLogging      = true;            // Same

// === Advanced ===
input bool                 EnableDebugMode            = true;            // Same
input bool                 BypassAllFilters           = false;           // Same
input bool                 DryRunMode                 = false;           // Same
input bool                 EnableFilterAlerts         = false;           // Same

// === Dashboard ===
input bool                 ShowDashboard              = true;            // Same
```

---

## üìä EXPECTED OUTCOMES

### Trade Volume
- **v3.1.0:** 742 trades
- **v3.1.1 Estimate:** 30-50 trades
- **Reduction:** 93-96% (much more selective)

### Win Rate
- **v3.1.0:** 19.1%
- **v3.1.1 Target:** 25-30%
- **Improvement:** +6-11 percentage points

### Risk of Ruin
- **v3.1.0:** 100% (account blown)
- **v3.1.1:** Significantly reduced with 1% risk and better selectivity

### Quality ‚â• 90 Impact
- In v3.1.0, only 36 trades had Quality ‚â• 90
- Those 36 trades had 27.8% win rate
- This alone improves baseline by +8.7 percentage points

### Zone Filter Impact
- Removes 428 AVOID trades (19.4% win rate)
- Removes 135 TRANSITION trades (15.6% win rate)
- Keeps 179 BULL/BEAR trades (21.1% avg win rate)

### Acceleration Filter Impact
- v3.1.0: MinAccel=100 ‚Üí 741/742 trades passed (no filtering)
- v3.1.1: MinAccel=1280 ‚Üí ~440 trades pass (40% rejection)
- Winners had median accel of 1,280 vs losers at 1,283

---

## üöÄ BACKTEST EXECUTION PLAN

### Step 1: Update EA File
1. Open `TP_Integrated_EA_Crossover_3_1_0.mq5`
2. Save as `TP_Integrated_EA_Crossover_3_1_1.mq5`
3. Update version strings:
   - Line 8: `#property version "3.11"`
   - Line 13: `#define EA_VERSION "3.11_OPTIMIZED"`
   - Line 15: `input int MagicNumber = 300311;`
   - Line 16: `input string TradeComment = "TP_Integrated 3_11";`
4. Apply all parameter changes listed above

### Step 2: Compile
1. Open in MetaEditor (F4 in MT5)
2. Compile (F7)
3. Verify no errors

### Step 3: Run Backtest
1. Open Strategy Tester (Ctrl+R)
2. Settings:
   - Expert: `TP_Integrated_EA_Crossover_3_1_1.ex5`
   - Symbol: NAS100
   - Period: M5
   - Dates: 2025.01.01 - 2025.10.31 (same as v3.1.0)
   - Deposit: $1,000
   - Optimization: OFF (single run)
   - Visual Mode: OFF (faster)
3. Start backtest
4. Export report to CSV: `TP_Integrated_MTBacktest_NAS100_05M_v3.1.1.csv`

### Step 4: Collect CSVs
Files will be generated:
1. `TP_Integrated_MTBacktest_NAS100_05M_v3.1.1.csv` (MT5 report)
2. `TP_Integrated_Trades_NAS100_v3.11_OPTIMIZED.csv` (EA trades)
3. `TP_Integrated_Signals_NAS100_v3.11_OPTIMIZED.csv` (EA signals)

Copy to: `/Users/patjohnston/Desktop/MT5 EA Backtest CSV Folder/`

### Step 5: Analyze Results
Compare v3.1.1 vs v3.1.0:
- Trade count reduction
- Win rate improvement
- Final balance
- Max drawdown
- Profit factor

---

## üé≤ CONTINGENCY PLAN

### If v3.1.1 Still Shows Poor Results (<20% Win Rate)

**v3.1.2 - AGGRESSIVE FILTERING:**

```cpp
MinQuality               = 95.0;      // ‚¨ÜÔ∏è From 90
MinAccelerationBuy       = 2000.0;    // ‚¨ÜÔ∏è From 1280
MinAccelerationSell      = 2000.0;    // ‚¨ÜÔ∏è From 1280
MinSpeedBuy              = 5000.0;    // ‚¨ÜÔ∏è From 3116
MinSpeedSell             = 5000.0;    // ‚¨ÜÔ∏è From 3116
```

**v3.1.3 - TIME-BASED FILTERING:**

Add time filters to only trade best hours:
- 10:00 (29.4% win rate, 34 trades)
- 17:00 (29.0% win rate, 31 trades)
- 23:00 (33.3% win rate, 15 trades)

**v3.1.4 - ZONE-SPECIFIC:**

Only trade BULL zone:
- 143 trades at 21.7% win rate in baseline
- Best single zone performance

---

## üìà SUCCESS METRICS

### Minimum Acceptable Performance
- Win Rate: ‚â• 25%
- Profit Factor: ‚â• 1.0
- Max Drawdown: < 50%
- Final Balance: > $900

### Target Performance
- Win Rate: ‚â• 30%
- Profit Factor: ‚â• 1.5
- Max Drawdown: < 30%
- Final Balance: > $1,200

### Excellent Performance
- Win Rate: ‚â• 35%
- Profit Factor: ‚â• 2.0
- Max Drawdown: < 20%
- Final Balance: > $1,500

---

**Created:** November 11, 2025  
**Based on:** v3.1.0 Baseline (742 trades, 19.1% win rate)  
**Optimization Goal:** Improve selectivity and win rate  
**Next Version:** v3.1.1
